# Списки

Список (массив) - это индексированная совокупность переменных.

Список в Python - это встроенный тип данных, представляющий собой одну из разновидностей структур данных. Структуру данных можно представить как сложную единицу, объединяющую в себе группу более простых. Каждая разновидность структур данных имеет свои особенности. Список - это изменяемая последовательность произвольных элементов.
В подавляющем большинстве других языков программирования есть широко используемый тип данных как массив. В Python такого встроенного типа нет. Однако списки - это по своей сути массивы за одним исключением. Составляющие массив элементы должны принадлежать одному типу данных, для списков в python такого ограничения нет.
Например, массив должен содержать только целые числа или только вещественные числа или только строки. Список также может содержать элементы только одного типа, что делает его внешне неотличимым от массива. Но вполне допустимо, чтобы в одном списке содержались как числа, так и строки, а также что-нибудь еще.


В языке Python список обозначается квадратными скобками `[]`, а отдельные элементы списка разделяются запятыми. Простой пример списка с фруктами:

```python
fruits = ["яблоко", "груша", "апельсин", "киви"]
print(fruits)
```

Если вы вызовете функцию `print()`, Python выведет перечисление элементов списка в квадратных скобках

```python
['яблоко', 'груша', 'апельсин', 'киви']
```

Разберемся, как обратиться к отдельным элементам в списке.

## Обращение к элементам списка

Списки представляют собой упорядоченные наборы данных, поэтому для обращения к любому элементу списка следует сообщить Python **позицию (индекс)** нужного элемента. Чтобы обратиться к элементу в списке, укажите имя списка, за которым следует индекс элемента в квадратных скобках. Например, первый фрукт выводится следующим образом

```python
print(fruits[0])
яблоко
```

Когда мы запрашиваем один элемент из списка, Python возвращает только этот элемент без квадратных скобок или кавычек

```python
яблоко
```

## Индексы начинаются с 0, а не с 1

Python считает, что первый элемент списка находится в позиции 0, а не в позиции 1. Этот принцип встречается в большинстве языков программирования и объясняется особенностями низкоуровневой реализации операций со списками. Если вы получаете неожиданные результаты, определите, не допустили ли вы простую ошибку "смещения на 1".
Второму элементу списка соответствует индекс 1. В этой простой схеме индекс любого элемента вычисляется уменьшением на 1 его позиции в списке. Например, чтобы обратиться к четвертому элементу списка, следует запросить элемент с индексом 3.
В следующем примере выводятся названия фруктов с индексами 1 и 3

```python
print(fruits[1])
print(fruits[3])
```
При этом выводятся второй и четвертый элементы списка
```python
груша
киви
```
В Python также существует специальный синтаксис для обращения к последнему элементу списка. Если запросить элемент с индексом -1, Python всегда возвращает последний элемент в списке:
```python
print(fruits[-1])
киви
```

Этот синтаксис весьма полезен, потому что при работу со списками часто требуется обратиться к последним элементам, не зная точного количества элементов в списке. Синтаксис также распространяется на другие отрицательные значения индексов. Индекс -2 возвращает второй элемент от конца списка, индекс -3 - третий элемент от конца и так далее.

<p align="center">
  <img src="https://files.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LnmXmI-D1suCZkVT17D%2F-MJ5A-ZIh4mzEOpxKGGC%2F-MJ5D1qPdC4WZBb237_S%2Fimage.png?alt=media&token=a6680d41-be0d-400b-9f5e-62e7437ecf13"/>
</p>

## Изменение, добавление и удаление элементов

Как правило, вы будете создавать динамические списки; это означает, что во время выполнения программы в созданном вами списке будут добавляться и удаляться элементы.

> Например, вы можете создать игру, в которой игрок должен стрелять по кораблям космических захватчиков. Исходный набор кораблей сохраняется в списке; каждый раз, когда вы сбиваете корабль, он удаляется из списка. Каждый раз, когда на экране появляется новый враг, он включается в список. Длина списка кораблей будет уменьшаться и увеличиваться по ходу игры.

### Изменение элементов в списке

Синтаксис изменения элемента напоминает синтаксис обращения к элементу списка. Чтобы изменить элемент, укажите имя списка и индекс изменяемого элемента в квадратных скобках; далее задайте новое значение, которое должно быть присвоено элементу. Допустим, имеется список фамилий студентов и первым элементом списка хранится строка "Иванов". Как изменить значение первого элемента?

```python
students = ["Иванов","Петров","Сидоров"]
print(students)
['Иванов', 'Петров', 'Сидоров']

students[0] = "Серегин"
print(students)
['Серегин', 'Петров', 'Сидоров']

```

В строке 1 определяется исходный список, в котором первый элемент содержит строку "Иванов". В строке 5 значение первого элемента заменяется строкой "Серегин". Из вывода видно, что первый элемент действительно изменился, тогда как остальные элементы списка сохранили прежние значения:

```python
['Иванов', 'Петров', 'Сидоров']
['Серегин', 'Петров', 'Сидоров']
```

Изменить можно значение любого элемента в списке, не только первого.

### Добавление элементов в список

Новые элементы могут добавляться в списки по разным причинам: например, для появления на экране новых космических кораблей, включения новых данных в визуализацию или добавления новых зарегистрированных пользователей на созданный вами сайт. Python предоставляет несколько способов добавления новых данных в существующие списки.

#### Присоединение элементов в конец списка

Простейший способ добавления новых элементов в список - присоединение элементов в конец списка. Используя список из предыдущего примера, добавим нового студента в конец списка

```python
students = ["Иванов","Петров","Сидоров"]
students.append("Васин")

print(students)
['Иванов', 'Петров', 'Сидоров', 'Васин']
```

Функция `append()` в строке 2 присоединяет строку `'Васин'` в конец списка, другие элементы в списке остаются неизменными.
Функция `append()` упрощает динамическое построение списков. Например, вы можете начать с пустого списка и добавлять в него элементы серией функций `append()`.

```python
students = []
students.append("Петров")
students.append("Николаев")
students.append("Юлин")

print(students)
['Петров', 'Николаев', 'Юлин']
```

Такой способ построения списков встречается очень часто, потому что данные, которые пользователь захочет сохранить в программе, часто становятся известными только после запуска программы. Чтобы пользователь мог управлять содержимым списка. начните с определения пустого списка, а затем присоединяйте к нему каждое новое значение.

#### Вставка элементов в список

Функция `insert()` позволяет добавить новый элемент в произвольную позицию списка. Для этого следует указать индекс и значение нового элемента.

```python
students = ["Иванов", "Петров", "Сидоров"]
students.insert(0, "Aфонин")

print(students)
['Aфонин', 'Иванов', 'Петров', 'Сидоров']
```

В этом примере в строке 2 значение "Афонин" вставляется в начало списка. Функция `insert()` выделяет свободное место в позиции 0 и сохраняет в нем значение "Афонин". Все остальные значения списка при этом сдвигаются на одну позицию вправо.

## Удаление элементов из списка

Нередко возникает необходимость в удалении одного или нескольких элементов из списка.

> Например, когда игрок сбивает корабль пришельца, этот корабль стоит удалить из списка активных врагов. Или когда пользователь решает удалить свою учетную запись в созданном вами веб-приложении, этот пользователь должен быть удален из списка активных пользователей.

Элементы удаляются из списка по позиции или по значению.

### Удаление элемента с использованием команды `del`

Если вам неизвестна позиция элемента, который должен быть удален из списка, воспользуйтесь командой `del`.

```python
print(students)
['Aфонин', 'Иванов', 'Петров', 'Сидоров']
del students[0]

print(students)
['Иванов', 'Петров', 'Сидоров']
```
Команда `del` позволяет удалить элемент из любой позиции списка, если вам известен его индекс. Например, вот как из списка удаляется второй элемент

```python
students = ["Иванов", "Петров", "Сидоров"]
del students[1]

print(students)
['Иванов', 'Сидоров']
```

В обоих примерах значение, удаленное из списка после использования команды `del`, становится недоступным. Удаление элемента с использованием функции `pop()`. Иногда значение, удаляемое из списка, должно как-то использоваться.

> Допустим, вы хотите получить координаты x и y только что сбитого корабля пришельцев, чтобы изобразить взрыв в этой позиции. В веб-приложении пользователь, удаленный из списка активных участников, может быть добавлен в список неактивных и так далее.

Функция `pop()` удаляет последний элемент из списка, но позволяет работать с ним после удаления.

```python
students = ["Иванов", "Петров", "Сидоров"]
expelled = students.pop()

print(students)
['Иванов', 'Петров']

print(expelled)
Сидоров
```

В строке 2 значение извлекается из списка и сохраняется в переменной с именем `expelled`. Вывод измененного списка в строке 4 показывает, что значение было удалено из списка. Затем мы выводим извлеченное значение в строке 7, демонстрируя, что удаленное значение остается доступным в программе.

### Извлечение элементов из произвольной позиции списка

Функция `pop()` может использоваться для удаления элемента в произвольной позиции списка; для этого следует указать индекс удаляемого элемента как аргумент функции `pop()`

```python
students = ["Иванов", "Петров", "Сидоров"]
expelled = students.pop(1)

print(students)
['Иванов', 'Сидоров']

>>> print(expelled)
Петров
```

Помните, что после каждого вызова `pop()` элемент, с которым вы работаете, уже не находится в списке.

> Если вы не уверены в том, какой из двух способов выбрать, команду `del` или функцию `pop()` - если вы собираетесь просто удалить элемент из списка, никак не используя его, выбирайте команду `del`; если же вы намерены использовать элемент после удаления из списка, выбирайте функцию `pop()`.

### Удаление элементов по значению

Иногда позиция удаляемого элемента неизвестна. Если вы знаете только значение элемента, используйте функцию `remove()`. В качестве аргумента функции указывается значение, которое требуется удалить

```python
students = ["Иванов", "Петров", "Сидоров"]
students.remove("Петров")

print(students)
['Иванов', 'Сидоров']
```

## Ошибки индексирования при работе со списками

Когда программист только начинает работать со списками, он часто допускает одну характерную ошибку. Допустим, имеется список с тремя элементами, а программист написал программу так, что она запрашивает четвертый элемент

```python
students = ["Иванов", "Петров", "Сидоров"]
print(students[3])

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
```

Python пытается вернуть элемент с индексом 3. Однако при поиске по списку ни один элемент не обладает индексом 3. Из-за смещения индексов на 1 эта ошибка весьма распространена. Люди думают, что третьим элементом является элемент с индексом 3, потому что они начинают отсчет с 1. Но для Python третьим является элемент с индексом 2, потому что индексирование начинается с 0.

> Ошибка индексирования означает, что указанный индекс для данного списка является некорректным.

Помните, что для обращения к последнему элементу в списке используется индекс -1. Этот способ работает всегда, даже если размер списка изменился с момента последнего обращения к нему

```python
students = ["Иванов", "Петров", "Сидоров"]
print(students[-1])
Сидоров
```

Этот синтаксис порождает ошибку только в одном случае - при попытке получить последний элемент пустого списка

```python
students = []
print(students[-1])

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
```
